<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="landing.html"><strong aria-hidden="true">1.</strong> Ethstaker Deposit CLI</a></li><li class="chapter-item expanded "><a href="quick_setup.html"><strong aria-hidden="true">2.</strong> Quick Setup</a></li><li class="chapter-item expanded "><a href="other_install_options.html"><strong aria-hidden="true">3.</strong> Other Install Options</a></li><li class="chapter-item expanded affix "><li class="part-title">Commands</li><li class="chapter-item expanded "><a href="new_mnemonic.html"><strong aria-hidden="true">4.</strong> New Mnemonic</a></li><li class="chapter-item expanded "><a href="existing_mnemonic.html"><strong aria-hidden="true">5.</strong> Existing Mnemonic</a></li><li class="chapter-item expanded "><a href="generate_bls_to_execution_change.html"><strong aria-hidden="true">6.</strong> Generate BLS to Execution Change</a></li><li class="chapter-item expanded "><a href="generate_bls_to_execution_change_keystore.html"><strong aria-hidden="true">7.</strong> Generate BLS to Execution Change Keystore</a></li><li class="chapter-item expanded "><a href="exit_transaction_keystore.html"><strong aria-hidden="true">8.</strong> Exit Transaction Keystore</a></li><li class="chapter-item expanded "><a href="exit_transaction_mnemonic.html"><strong aria-hidden="true">9.</strong> Exit Transaction Mnemonic</a></li><li class="chapter-item expanded "><a href="partial_deposit.html"><strong aria-hidden="true">10.</strong> Partial Deposit</a></li><li class="chapter-item expanded "><a href="test_keystore.html"><strong aria-hidden="true">11.</strong> Test Keystore</a></li><li class="chapter-item expanded affix "><li class="part-title">File formats</li><li class="chapter-item expanded "><a href="keystore_file.html"><strong aria-hidden="true">12.</strong> Keystore</a></li><li class="chapter-item expanded "><a href="deposit_data_file.html"><strong aria-hidden="true">13.</strong> Deposit Data</a></li><li class="chapter-item expanded "><a href="bls_to_execution_change_file.html"><strong aria-hidden="true">14.</strong> BLS to Execution Change</a></li><li class="chapter-item expanded "><a href="bls_to_execution_change_keystore_file.html"><strong aria-hidden="true">15.</strong> BLS to Execution Change Keystore</a></li><li class="chapter-item expanded "><a href="signed_exit_transaction_file.html"><strong aria-hidden="true">16.</strong> Signed Exit Transaction</a></li><li class="chapter-item expanded affix "><li class="part-title">Development</li><li class="chapter-item expanded "><a href="local_development.html"><strong aria-hidden="true">17.</strong> Local Development</a></li><li class="chapter-item expanded "><a href="release_process.html"><strong aria-hidden="true">18.</strong> Release Process</a></li><li class="chapter-item expanded "><a href="reporting_vulnerability.html"><strong aria-hidden="true">19.</strong> Reporting a Vulnerability</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="welcome-to-the-ethstaker-deposit-cli"><a class="header" href="#welcome-to-the-ethstaker-deposit-cli">Welcome to the <code>ethstaker-deposit-cli</code>!</a></h1>
<p>The <a href="https://github.com/eth-educators/ethstaker-deposit-cli"><code>ethstaker-deposit-cli</code></a> is a command-line tool forked from Ethereum's <a href="https://github.com/ethereum/staking-deposit-cli"><code>staking-deposit-cli</code></a> with more functionality and improved performance.</p>
<h2 id="important-concerns"><a class="header" href="#important-concerns">Important Concerns</a></h2>
<p>This tool generates and/or utilizes mnemonics and validator key material. Both are highly sensitive materials, and their exposure could lead to the loss or theft of funds, as well as the compromise of privacy. Users must take appropriate measures to secure this information.</p>
<p>Here are some core recommendations:</p>
<ul>
<li>
<p><strong>Use this tool offline</strong>: We highly recommend using this tool in an offline environment, preferably air-gapped, using a live USB such as <a href="https://tails.net/install/download/index.en.html">Tails</a>.</p>
</li>
<li>
<p><strong>Avoid using passwords or mnemonics as command line arguments</strong>: When executing any command, you will be prompted for the necessary arguments. This prevents the arguments from being stored in your command history which could create an attack vector.</p>
</li>
<li>
<p><strong>Do not expose or share any material</strong>: This tool generates and uses critically secure material that should not be shared or exposed. There is an abundance of thieves that use malicious links and scam tactics to get you to expose sensitive material. Be sure to triple check any tools or websites you are using and remain vigilant.</p>
</li>
<li>
<p><strong>Create backups of your mnemonic</strong>: The mnemonic generated by this tool is essential for your operation and success as a validator. Losing this mnemonic can result in significant financial loss. Carefully follow the instructions when creating a mnemonic, ensure you make a backup copy, and store it in a secure location. For long-term protection, consider using products like CryptoSteel and ColdTi, which offer resistance to the elements.</p>
</li>
</ul>
<h2 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h2>
<p>If you want to start creating validator keys, please follow the <a href="quick_setup.html">Quick Setup Instructions</a> or if you would like to run locally, view the <a href="local_development.html">Local Development Instructions</a>.</p>
<p>The general usage of the CLI is:</p>
<pre><code class="language-sh">./deposit [OPTIONS] COMMAND [ARGS]
</code></pre>
<h2 id="command-options"><a class="header" href="#command-options">Command Options</a></h2>
<p>Each CLI command has a number of command options that can be provided:</p>
<ul>
<li>
<p><strong><code>--language</code></strong>: The language you wish to use the CLI in. Options: العربية, ελληνικά, English, Français, Bahasa melayu, Italiano, 日本語, 한국어, Português do Brasil, român, 简体中文. Default to English.</p>
</li>
<li>
<p><strong><code>--non_interactive</code></strong>: Run CLI in non-interactive mode. This will skip all confirmation and internet connectivity checks.</p>
</li>
<li>
<p><strong><code>--ignore_connectivity</code></strong>: Skip internet connectivity check and warning.</p>
</li>
</ul>
<h2 id="commands"><a class="header" href="#commands">Commands</a></h2>
<p><strong>You are not required to specify each argument when executing the command. We will prompt you for each argument for security purposes.</strong></p>
<p>If there is a specific command you would like to understand more, please choose from the following list:</p>
<ul>
<li>
<p><strong><a href="new_mnemonic.html">new-mnemonic</a></strong>: Used to generate a new mnemonic, validator keys, and deposit file. It is not recommended to use this command if you have existing validators.</p>
</li>
<li>
<p><strong><a href="existing_mnemonic.html">existing-mnemonic</a></strong>: Provide a mnemonic to regenerate validator keys or create new ones.</p>
</li>
<li>
<p><strong><a href="generate_bls_to_execution_change.html">generate-bls-to-execution-change</a></strong>: Add a withdrawal address to a validator that does not currently have one. It is <strong>required</strong> to have the corresponding mnemonic.</p>
</li>
<li>
<p><strong><a href="generate_bls_to_execution_change_keystore.html">generate-bls-to-execution-change-keystore</a></strong>: Sign an update withdrawal credentials message using your validator keystore.</p>
</li>
<li>
<p><strong><a href="exit_transaction_keystore.html">exit-transaction-keystore</a></strong>: Generate an exit message using the keystore of your validators.</p>
</li>
<li>
<p><strong><a href="exit_transaction_mnemonic.html">exit-transaction-mnemonic</a></strong>: Generate an exit message using the mnemonic of your validators.</p>
</li>
<li>
<p><strong><a href="partial_deposit.html">partial-deposit</a></strong>: Generate a deposit file with an existing validator key. Can be used to initiate a validator or deposit to an existing validator.</p>
</li>
<li>
<p><strong><a href="test_keystore.html">test-keystore</a></strong>: Verify access to the provided keystore file by attempting to decrypt with the provided keystore password.</p>
</li>
</ul>
<h2 id="canonical-deposit-contract-and-launchpad"><a class="header" href="#canonical-deposit-contract-and-launchpad">Canonical Deposit Contract and Launchpad</a></h2>
<p>Ethstaker confirms the canonical Ethereum staking deposit contract addresses and launchpad URLs.
Please be sure that your ETH is deposited only to this deposit contract address, depending on chain.</p>
<p>Depositing to the wrong address <strong>will</strong> lose you your ETH.</p>
<ul>
<li>Ethereum mainnet
<ul>
<li>Deposit address: <a href="https://etherscan.io/address/0x00000000219ab540356cBB839Cbe05303d7705Fa">0x00000000219ab540356cBB839Cbe05303d7705Fa</a></li>
<li><a href="https://launchpad.ethereum.org/">Launchpad</a></li>
</ul>
</li>
<li>Ethereum Holešky (Holešovice) testnet
<ul>
<li>Deposit address: <a href="https://holesky.etherscan.io/address/0x4242424242424242424242424242424242424242">0x4242424242424242424242424242424242424242</a></li>
<li><a href="https://holesky.launchpad.ethereum.org/">Launchpad</a></li>
</ul>
</li>
</ul>
<h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<p>This project is open-source and welcomes contributions from the community. If you would like to contribute to the <code>ethstaker-deposit-cli</code>, please read the <a href="local_development.html">Local Development Instructions</a>, fork the project, and create a pull request with a description of the changes you have made and why.</p>
<h2 id="support"><a class="header" href="#support">Support</a></h2>
<p>If you encounter any issues or have questions while using the <code>ethstaker-deposit-cli</code>, please contact us on the <a href="https://dsc.gg/ethstaker">Ethstaker discord</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="quick-setup"><a class="header" href="#quick-setup">Quick Setup</a></h1>
<p>This guide will walk you through the steps to download and set up the <code>ethstaker-deposit-cli</code> for your operating system.</p>
<p><strong>Build requirements</strong></p>
<ul>
<li><a href="https://www.python.org/about/gettingstarted/">Python <strong>3.9+</strong></a></li>
<li><a href="https://pip.pypa.io/en/stable/installing/">pip3</a></li>
</ul>
<h2 id="step-1-download-the-latest-release"><a class="header" href="#step-1-download-the-latest-release">Step 1: Download the Latest Release</a></h2>
<h3 id="download-binary-executable-file"><a class="header" href="#download-binary-executable-file">Download binary executable file</a></h3>
<ol>
<li>
<p>Navigate to the <a href="https://github.com/eth-educators/ethstaker-deposit-cli/releases">Releases page</a> of the <code>ethstaker-deposit-cli</code> repository.</p>
</li>
<li>
<p>Download the corresponding file for your operating system:</p>
<ul>
<li><strong>Windows</strong>: Look for a file with <code>windows</code> in the name.</li>
<li><strong>MacOS</strong>: Look for a file with <code>darwin</code> in the name.</li>
<li><strong>Linux</strong>: Look for a file with <code>linux</code> in the name.</li>
</ul>
</li>
<li>
<p>Extract the contents of the zipped file</p>
</li>
<li>
<p>Open a terminal or command prompt and navigate to the extracted folder</p>
</li>
</ol>
<p>For other installation options, including building with python or virtualenv and docker image instructions, go <a href="other_install_options.html">here</a></p>
<h2 id="step-2-verify-the-installation"><a class="header" href="#step-2-verify-the-installation">Step 2: Verify the Installation</a></h2>
<ol>
<li>
<p>Make sure you have <a href="https://cli.github.com/">the GitHub CLI installed</a>.</p>
</li>
<li>
<p>Verify the attestation against the corresponding file but be sure to replace the contents with the exact file name:</p>
</li>
</ol>
<pre><code class="language-sh">gh attestation verify ethstaker_deposit-cli-*******-***.*** --repo eth-educators/ethstaker-deposit-cli
</code></pre>
<p>This step requires you to be online. If you want to perform this offline, follow <a href="https://docs.github.com/en/actions/security-for-github-actions/using-artifact-attestations/verifying-attestations-offline">these instructions from GitHub</a>.</p>
<ol start="3">
<li>You should see <code>✓ Verification succeeded!</code> in the output <strong>otherwise do not continue</strong>.</li>
</ol>
<h2 id="step-3-usage"><a class="header" href="#step-3-usage">Step 3: Usage</a></h2>
<p><strong>Windows users:</strong> You should replace <code>./deposit</code> with <code>deposit.exe</code> to run properly.</p>
<p><strong>MacOS users:</strong> In order to run from the terminal, you must first open the file to bypass MacOS code signing issues. Do so by right clicking the <code>deposit</code> file and then selecting <code>Open</code>.</p>
<p><strong>Linux users:</strong> On Unix-based systems, keystores and the deposit_data*.json have 440/-r--r----- file permissions (user &amp; group read only). This improves security by limiting which users and processes that have access to these files. If you are getting permission denied errors when handling your keystores, consider changing which user/group owns the file (with chown) or, if need be, change the file permissions with chmod.</p>
<p>Determine which command best suites what you would like to accomplish:</p>
<ul>
<li>
<p><strong><a href="new_mnemonic.html">new-mnemonic</a></strong>: Used to generate a new mnemonic, validator keys, and deposit file. It is not recommended to use this command if you have existing validators.</p>
</li>
<li>
<p><strong><a href="existing_mnemonic.html">existing-mnemonic</a></strong>: Provide a mnemonic to regenerate validator keys or create new ones.</p>
</li>
<li>
<p><strong><a href="generate_bls_to_execution_change.html">generate-bls-to-execution-change</a></strong>: Update your withdrawal credentials of existing validators. It is <strong>required</strong> to have the corresponding mnemonic.</p>
</li>
<li>
<p><strong><a href="generate_bls_to_execution_change_keystore.html">generate-bls-to-execution-change-keystore</a></strong>: Sign an update withdrawal credentials message using your validator keystore.</p>
</li>
<li>
<p><strong><a href="exit_transaction_keystore.html">exit-transaction-keystore</a></strong>: Generate an exit message using the keystore of your validators.</p>
</li>
<li>
<p><strong><a href="exit_transaction_mnemonic.html">exit-transaction-mnemonic</a></strong>: Generate an exit message using the mnemonic of your validators.</p>
</li>
<li>
<p><strong><a href="partial_deposit.html">partial-deposit</a></strong>: Generate a partial deposit using a validator keystore.</p>
</li>
</ul>
<hr />
<p>If you encounter any issues, please check the <a href="https://github.com/eth-educators/ethstaker-deposit-cli/issues">issues page</a> for help or to report a problem. You may also contact us on the <a href="https://dsc.gg/ethstaker">Ethstaker discord</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="other-install-options"><a class="header" href="#other-install-options">Other Install Options</a></h1>
<h2 id="linux-or-macos-users"><a class="header" href="#linux-or-macos-users">Linux or MacOS users</a></h2>
<h3 id="option-1-build-deposit-cli-with-native-python"><a class="header" href="#option-1-build-deposit-cli-with-native-python">Option 1. Build <code>deposit-cli</code> with native Python</a></h3>
<ol>
<li>
<p><strong>Python version checking</strong></p>
<p>Ensure you are using Python version &gt;= Python3.9:</p>
<pre><code class="language-sh">python3 -V
</code></pre>
</li>
<li>
<p><strong>Installation</strong></p>
<p>Install the dependencies:</p>
<pre><code class="language-sh">pip3 install -r requirements.txt
</code></pre>
<p>Or use the helper script:</p>
<pre><code class="language-sh">./deposit.sh install
</code></pre>
</li>
<li>
<p><strong>Create keys and <code>deposit_data-*.json</code></strong></p>
<p>Run one of the following command to enter the interactive CLI:</p>
<pre><code class="language-sh">./deposit.sh new-mnemonic
</code></pre>
<p>or</p>
<pre><code class="language-sh">./deposit.sh existing-mnemonic
</code></pre>
<p>You can also run the tool with optional arguments:</p>
<pre><code class="language-sh">./deposit.sh new-mnemonic --num_validators=&lt;NUM_VALIDATORS&gt; --mnemonic_language=english --chain=&lt;CHAIN_NAME&gt; --folder=&lt;YOUR_FOLDER_PATH&gt;
</code></pre>
<pre><code class="language-sh">./deposit.sh existing-mnemonic --num_validators=&lt;NUM_VALIDATORS&gt; --validator_start_index=&lt;START_INDEX&gt; --chain=&lt;CHAIN_NAME&gt; --folder=&lt;YOUR_FOLDER_PATH&gt;
</code></pre>
</li>
</ol>
<h3 id="option-2-build-deposit-cli-with-virtualenv"><a class="header" href="#option-2-build-deposit-cli-with-virtualenv">Option 2. Build <code>deposit-cli</code> with <code>virtualenv</code></a></h3>
<ol>
<li>
<p><strong>Python version checking</strong></p>
<p>Ensure you are using Python version &gt;= Python3.9:</p>
<pre><code class="language-sh">python3 -V
</code></pre>
</li>
<li>
<p><strong>Installation</strong></p>
<p>Install <code>venv</code> if not already installed, e.g. for Debian/Ubuntu:</p>
<pre><code class="language-sh">sudo apt update &amp;&amp; sudo apt install python3-venv
</code></pre>
<p>Create a new <a href="https://docs.python.org/3/library/venv.html">virtual environment</a>:</p>
<pre><code class="language-sh">python3 -m venv .venv
source .venv/bin/activate
</code></pre>
<p>and install the dependencies:</p>
<pre><code class="language-sh">pip3 install -r requirements.txt
</code></pre>
</li>
<li>
<p><strong>Create keys and <code>deposit_data-*.json</code></strong></p>
<p>Run one of the following command to enter the interactive CLI:</p>
<pre><code class="language-sh">python3 -m ethstaker_deposit new-mnemonic
</code></pre>
<p>or</p>
<pre><code class="language-sh">python3 -m ethstaker_deposit existing-mnemonic
</code></pre>
<p>You can also run the tool with optional arguments:</p>
<pre><code class="language-sh">python3 -m ethstaker_deposit new-mnemonic --num_validators=&lt;NUM_VALIDATORS&gt; --mnemonic_language=english --chain=&lt;CHAIN_NAME&gt; --folder=&lt;YOUR_FOLDER_PATH&gt;
</code></pre>
<pre><code class="language-sh">python3 -m ethstaker_deposit existing-mnemonic --num_validators=&lt;NUM_VALIDATORS&gt; --validator_start_index=&lt;START_INDEX&gt; --chain=&lt;CHAIN_NAME&gt; --folder=&lt;YOUR_FOLDER_PATH&gt;
</code></pre>
</li>
</ol>
<h3 id="option-3-use-published-docker-image"><a class="header" href="#option-3-use-published-docker-image">Option 3. Use published docker image</a></h3>
<ol>
<li>
<p><strong>Pull the official docker image</strong></p>
<p>Run the following command to pull the latest docker image published on the Github repository:</p>
<pre><code class="language-sh">docker pull ghcr.io/eth-educators/ethstaker-deposit-cli:latest
</code></pre>
</li>
<li>
<p><strong>Create keys and <code>deposit_data-*.json</code></strong></p>
<p>Run the following command to enter the interactive CLI:</p>
<pre><code class="language-sh">docker run -it --rm -v $(pwd)/validator_keys:/app/validator_keys ghcr.io/eth-educators/ethstaker-deposit-cli:latest
</code></pre>
<p>You can also run the tool with optional arguments:</p>
<pre><code class="language-sh">docker run -it --rm -v $(pwd)/validator_keys:/app/validator_keys ghcr.io/eth-educators/ethstaker-deposit-cli:latest new-mnemonic --num_validators=&lt;NUM_VALIDATORS&gt; --mnemonic_language=english
</code></pre>
<p>Example for 1 validator on the <a href="https://holesky.launchpad.ethereum.org/">Holesky testnet</a> using english:</p>
<pre><code class="language-sh">docker run -it --rm -v $(pwd)/validator_keys:/app/validator_keys ghcr.io/eth-educators/ethstaker-deposit-cli:latest new-mnemonic --num_validators=1 --mnemonic_language=english --chain=holesky
</code></pre>
</li>
</ol>
<h3 id="option-4-use-local-docker-image"><a class="header" href="#option-4-use-local-docker-image">Option 4. Use local docker image</a></h3>
<ol>
<li>
<p><strong>Build the docker image</strong></p>
<p>Run the following command to locally build the docker image:</p>
<pre><code class="language-sh">make build_docker
</code></pre>
</li>
<li>
<p><strong>Create keys and <code>deposit_data-*.json</code></strong></p>
<p>Run the following command to enter the interactive CLI:</p>
<pre><code class="language-sh">docker run -it --rm -v $(pwd)/validator_keys:/app/validator_keys eth-educators/ethstaker-deposit-cli
</code></pre>
<p>You can also run the tool with optional arguments:</p>
<pre><code class="language-sh">docker run -it --rm -v $(pwd)/validator_keys:/app/validator_keys eth-educators/ethstaker-deposit-cli new-mnemonic --num_validators=&lt;NUM_VALIDATORS&gt; --mnemonic_language=english
</code></pre>
<p>Example for 1 validator on the <a href="https://holesky.launchpad.ethereum.org/">Holesky testnet</a> using english:</p>
<pre><code class="language-sh">docker run -it --rm -v $(pwd)/validator_keys:/app/validator_keys eth-educators/ethstaker-deposit-cli new-mnemonic --num_validators=1 --mnemonic_language=english --chain=holesky
</code></pre>
</li>
</ol>
<hr />
<h2 id="for-windows-users"><a class="header" href="#for-windows-users">For Windows users</a></h2>
<h3 id="option-1-build-deposit-cli-with-native-python-1"><a class="header" href="#option-1-build-deposit-cli-with-native-python-1">Option 1. Build <code>deposit-cli</code> with native Python</a></h3>
<ol>
<li>
<p><strong>Python version checking</strong></p>
<p>Ensure you are using Python version &gt;= Python12 (Assume that you've installed Python 3 as the main Python):</p>
<pre><code class="language-sh">python -V
</code></pre>
</li>
<li>
<p><strong>Installation</strong></p>
<p>Install the dependencies:</p>
<pre><code class="language-sh">pip3 install -r requirements.txt
</code></pre>
<p>Or use the helper script:</p>
<pre><code class="language-sh">sh deposit.sh install
</code></pre>
</li>
<li>
<p><strong>Create keys and <code>deposit_data-*.json</code></strong></p>
<p>Run one of the following command to enter the interactive CLI:</p>
<pre><code class="language-sh">./deposit.sh new-mnemonic
</code></pre>
<p>or</p>
<pre><code class="language-sh">./deposit.sh existing-mnemonic
</code></pre>
<p>You can also run the tool with optional arguments:</p>
<pre><code class="language-sh">./deposit.sh new-mnemonic --num_validators=&lt;NUM_VALIDATORS&gt; --mnemonic_language=english --chain=&lt;CHAIN_NAME&gt; --folder=&lt;YOUR_FOLDER_PATH&gt;
</code></pre>
<pre><code class="language-sh">./deposit.sh existing-mnemonic --num_validators=&lt;NUM_VALIDATORS&gt; --validator_start_index=&lt;START_INDEX&gt; --chain=&lt;CHAIN_NAME&gt; --folder=&lt;YOUR_FOLDER_PATH&gt;
</code></pre>
</li>
</ol>
<h3 id="option-2-build-deposit-cli-with-virtualenv-1"><a class="header" href="#option-2-build-deposit-cli-with-virtualenv-1">Option 2. Build <code>deposit-cli</code> with <code>virtualenv</code></a></h3>
<ol>
<li>
<p><strong>Python version checking</strong></p>
<p>Ensure you are using Python version &gt;= Python3.9 (Assume that you've installed Python 3 as the main Python):</p>
<pre><code class="language-cmd">python -V
</code></pre>
</li>
<li>
<p><strong>Installation</strong></p>
<p>Create a new <a href="https://docs.python.org/3/library/venv.html">virtual environment</a>:</p>
<pre><code class="language-sh">python3 -m venv .venv
.\.venv\Scripts\activate
</code></pre>
<p>and install the dependencies:</p>
<pre><code class="language-cmd">pip3 install -r requirements.txt
</code></pre>
</li>
<li>
<p><strong>Create keys and <code>deposit_data-*.json</code></strong></p>
<p>Run one of the following command to enter the interactive CLI:</p>
<pre><code class="language-cmd">python -m ethstaker_deposit new-mnemonic
</code></pre>
<p>or</p>
<pre><code class="language-cmd">python -m ethstaker_deposit existing-mnemonic
</code></pre>
<p>You can also run the tool with optional arguments:</p>
<pre><code class="language-cmd">python -m ethstaker_deposit new-mnemonic --num_validators=&lt;NUM_VALIDATORS&gt; --mnemonic_language=english --chain=&lt;CHAIN_NAME&gt; --folder=&lt;YOUR_FOLDER_PATH&gt;
</code></pre>
<pre><code class="language-cmd">python -m ethstaker_deposit existing-mnemonic --num_validators=&lt;NUM_VALIDATORS&gt; --validator_start_index=&lt;START_INDEX&gt; --chain=&lt;CHAIN_NAME&gt; --folder=&lt;YOUR_FOLDER_PATH&gt;
</code></pre>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="new-mnemonic"><a class="header" href="#new-mnemonic">new-mnemonic</a></h1>
<div class="warning">
Including sensitive arguments when executing CLI commands poses a security risk, as these values can be accessible through disk and shell history. This exposure can allow other users, including admins and malicious actors, to gain access to sensitive information, putting your funds at risk.
</div>
<h2 id="description"><a class="header" href="#description">Description</a></h2>
<p>Generates a new BIP-39 mnemonic along with validator keystore and deposit files depending on how many validators you wish to create.</p>
<h2 id="optional-arguments"><a class="header" href="#optional-arguments">Optional Arguments</a></h2>
<ul>
<li>
<p><strong><code>--mnemonic_language</code></strong>: The language of the BIP-39 mnemonic. Options are: 'chinese_simplified', 'chinese_traditional', 'czech', 'english', 'french', 'italian', 'japanese', 'korean', 'portuguese', 'spanish'.</p>
</li>
<li>
<p><strong><code>--chain</code></strong>: The chain to use for generating the deposit data. Options are: 'mainnet', 'holesky', etc...</p>
</li>
<li>
<p><strong><code>--num_validators</code></strong>: Number of validators to create.</p>
</li>
<li>
<p><strong><code>--keystore_password</code></strong>: The password that is used to encrypt the provided keystore. Note: It's not your mnemonic password. <span class="warning"></span></p>
</li>
<li>
<p><strong><code>--withdrawal_address</code></strong>: The Ethereum address that will be used in withdrawal. It typically starts with '0x' followed by 40 hexadecimal characters. Please make sure you have full control over the address you choose here. Once you set a withdrawal address on chain, it cannot be changed.</p>
</li>
<li>
<p><strong><code>--pbkdf2</code></strong>: Will use pbkdf2 key encryption instead of scrypt for generated keystore files as defined in <a href="https://eips.ethereum.org/EIPS/eip-2335#decryption-key">EIP-2335</a>. This can be a good alternative if you intend to work with a large number of keys, as it can improve performance. pbkdf2 encryption is, however, less secure than scrypt. You should only use this option if you understand the associated risks and have familiarity with encryption.</p>
</li>
<li>
<p><strong><code>--folder</code></strong>: The folder where keystore and deposit data files will be saved.</p>
</li>
<li>
<p><strong><code>--devnet_chain_setting</code></strong>: The custom chain setting of a devnet or testnet. Note that it will override your <code>--chain</code> choice. This should be a JSON string containing an object with the following keys: network_name, genesis_fork_version, exit_fork_version and genesis_validator_root.</p>
</li>
</ul>
<h2 id="output-files"><a class="header" href="#output-files">Output files</a></h2>
<p>A successful call to this command will result in one or many <a href="keystore_file.html">keystore files</a> created, one per validator created, and one <a href="deposit_data_file.html">deposit data file</a> created. The amount for each deposit in the deposit data file should always be 32 Ethers (<code>32000000000</code> in GWEI) with this command.</p>
<h2 id="example-usage"><a class="header" href="#example-usage">Example Usage</a></h2>
<pre><code class="language-sh">./deposit new-mnemonic
</code></pre>
<h2 id="note"><a class="header" href="#note">Note</a></h2>
<p>The newly generated mnemonic <strong>must</strong> be written down, on a piece of paper or transferred to steel. The clipboard is cleared when this command finishes. If the mnemonic is lost and the validator does not have a withdrawal address, funds <strong>cannot</strong> be recovered.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="existing-mnemonic"><a class="header" href="#existing-mnemonic">existing-mnemonic</a></h1>
<div class="warning">
Including sensitive arguments when executing CLI commands poses a security risk, as these values can be accessible through disk and shell history. This exposure can allow other users, including admins and malicious actors, to gain access to sensitive information, putting your funds at risk.
</div>
<h2 id="description-1"><a class="header" href="#description-1">Description</a></h2>
<p>Uses an existing BIP-39 mnemonic phrase for key generation.</p>
<h2 id="optional-arguments-1"><a class="header" href="#optional-arguments-1">Optional Arguments</a></h2>
<ul>
<li>
<p><strong><code>--chain</code></strong>: The chain to use for generating the deposit data. Options are: 'mainnet', 'holesky', etc...</p>
</li>
<li>
<p><strong><code>--mnemonic</code></strong>: The mnemonic you used to create withdrawal credentials. <span class="warning"></span></p>
</li>
<li>
<p><strong><code>--mnemonic_language</code></strong>: The language of your mnemonic. If this is not provided we will attempt to determine it based on the mnemonic.</p>
</li>
<li>
<p><strong><code>--mnemonic_password</code></strong>: The mnemonic password you used in your key generation. Note: It's not the keystore password. <span class="warning"></span></p>
</li>
<li>
<p><strong><code>--validator_start_index</code></strong>: The index of the first validator's keys you wish to generate. If this is your first time generating keys with this mnemonic, use 0. If you have generated keys using this mnemonic before, use the next index from which you want to start generating keys from. As an example if you've generated 4 keys before (keys #0, #1, #2, #3), then enter 4 here.</p>
</li>
<li>
<p><strong><code>--num_validators</code></strong>: Number of validators to create.</p>
</li>
<li>
<p><strong><code>--keystore_password</code></strong>: The password that is used to encrypt the provided keystore. Note: It's not your mnemonic password. <span class="warning"></span></p>
</li>
<li>
<p><strong><code>--withdrawal_address</code></strong>: The Ethereum address that will be used in withdrawal. It typically starts with '0x' followed by 40 hexadecimal characters. Please make sure you have full control over the address you choose here. Once you set a withdrawal address on chain, it cannot be changed.</p>
</li>
<li>
<p><strong><code>--pbkdf2</code></strong>: Will use pbkdf2 key derivation instead of scrypt for generated keystore files as defined in <a href="https://eips.ethereum.org/EIPS/eip-2335#decryption-key">EIP-2335</a>. This can be a good alternative if you intend to work with a large number of keys, as it can improve performance however it is less secure. You should only use this option if you understand the associated risks and have familiarity with encryption.</p>
</li>
<li>
<p><strong><code>--folder</code></strong>: The folder where keystore and deposit data files will be saved.</p>
</li>
<li>
<p><strong><code>--devnet_chain_setting</code></strong>: The custom chain setting of a devnet or testnet. Note that it will override your <code>--chain</code> choice. This should be a JSON string containing an object with the following keys: network_name, genesis_fork_version, exit_fork_version and genesis_validator_root.</p>
</li>
</ul>
<h2 id="output-files-1"><a class="header" href="#output-files-1">Output files</a></h2>
<p>A successful call to this command will result in one or many <a href="keystore_file.html">keystore files</a> created, one per validator created, and one <a href="deposit_data_file.html">deposit data file</a> created. The amount for each deposit in the deposit data file should always be 32 Ethers (<code>32000000000</code> in GWEI) with this command.</p>
<h2 id="example-usage-1"><a class="header" href="#example-usage-1">Example Usage</a></h2>
<pre><code class="language-sh">./deposit existing-mnemonic
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="generate-bls-to-execution-change"><a class="header" href="#generate-bls-to-execution-change">generate-bls-to-execution-change</a></h1>
<div class="warning">
Including sensitive arguments when executing CLI commands poses a security risk, as these values can be accessible through disk and shell history. This exposure can allow other users, including admins and malicious actors, to gain access to sensitive information, putting your funds at risk.
</div>
<h2 id="description-2"><a class="header" href="#description-2">Description</a></h2>
<p>Generates a BLS to execution address change message. This is used to add a withdrawal address to a validator that does not currently have one.</p>
<h2 id="optional-arguments-2"><a class="header" href="#optional-arguments-2">Optional Arguments</a></h2>
<ul>
<li>
<p><strong><code>--bls_to_execution_changes_folder</code></strong>: The path to store the change JSON file.</p>
</li>
<li>
<p><strong><code>--chain</code></strong>: The chain to use for generating the deposit data. Options are: 'mainnet', 'holesky', etc.</p>
</li>
<li>
<p><strong><code>--mnemonic</code></strong>: The mnemonic you used to create withdrawal credentials. <span class="warning"></span></p>
</li>
<li>
<p><strong><code>--mnemonic_language</code></strong>: The language of your mnemonic. If this is not provided we will attempt to determine it based on the mnemonic.</p>
</li>
<li>
<p><strong><code>--mnemonic_password</code></strong>: The mnemonic password you used in your key generation. Note: It's not the keystore password. <span class="warning"></span></p>
</li>
<li>
<p><strong><code>--validator_start_index</code></strong>: The index position for the keys to start generating withdrawal credentials for.</p>
</li>
<li>
<p><strong><code>--validator_indices</code></strong>: A list of the chosen validator index number(s) as identified on the beacon chain. Split multiple items with whitespaces or commas.</p>
</li>
<li>
<p><strong><code>--bls_withdrawal_credentials_list</code></strong>: A list of the old BLS withdrawal credentials of the given validator(s). It is for confirming you are using the correct keys. Split multiple items with whitespaces or commas.</p>
</li>
<li>
<p><strong><code>--withdrawal_address</code></strong>: The Ethereum address that will be used in withdrawal. It typically starts with '0x' followed by 40 hexadecimal characters. Please make sure you have full control over the address you choose here. Once you set a withdrawal address on chain, it cannot be changed.</p>
</li>
<li>
<p><strong><code>--devnet_chain_setting</code></strong>: The custom chain setting of a devnet or testnet. Note that it will override your <code>--chain</code> choice. This should be a JSON string containing an object with the following keys: network_name, genesis_fork_version, exit_fork_version and genesis_validator_root.</p>
</li>
</ul>
<h2 id="output-files-2"><a class="header" href="#output-files-2">Output files</a></h2>
<p>A successful call to this command will result in one <a href="bls_to_execution_change_file.html">BLS to Execution Change file</a> created.</p>
<h2 id="example-usage-2"><a class="header" href="#example-usage-2">Example Usage</a></h2>
<pre><code class="language-sh">./deposit generate-bls-to-execution-change
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="generate-bls-to-execution-change-keystore"><a class="header" href="#generate-bls-to-execution-change-keystore">generate-bls-to-execution-change-keystore</a></h1>
<div class="warning">
This command is associated with the a proposed solution to update withdrawal credentials for those who are missing their mnemonic. At this point this has not been approved or implemented and there is no guarantee credentials will be modified in the future.
<p>The project is located <a href="https://github.com/eth-educators/update-credentials-without-mnemonic">here</a> if you would like to learn more.</p>
</div>
<h2 id="description-3"><a class="header" href="#description-3">Description</a></h2>
<p>Signs a withdrawal credential update message using the provided keystore. This signature is one of the required proofs of ownership for validators who have lost or are missing their mnemonic and are unable to perform the BLS change needed to update their withdrawal credentials.</p>
<h2 id="optional-arguments-3"><a class="header" href="#optional-arguments-3">Optional Arguments</a></h2>
<ul>
<li>
<p><strong><code>--chain</code></strong>: The chain to use for generating the deposit data. Options are: 'mainnet', 'holesky', etc.</p>
</li>
<li>
<p><strong><code>--keystore</code></strong>: The keystore file associating with the validator you wish to sign with. This keystore file should match the provided validator index.</p>
</li>
<li>
<p><strong><code>--keystore_password</code></strong>: The password that is used to encrypt the provided keystore. Note: It's not your mnemonic password. <span class="warning"></span></p>
</li>
<li>
<p><strong><code>--validator_index</code></strong>: The validator index corresponding to the provided keystore.</p>
</li>
<li>
<p><strong><code>--withdrawal_address</code></strong>: The Ethereum address that will be used in withdrawal. It typically starts with '0x' followed by 40 hexadecimal characters. Please make sure you have full control over the address you choose here. Once you set a withdrawal address on chain, it cannot be changed.</p>
</li>
<li>
<p><strong><code>--output_folder</code></strong>: The folder path for the <code>bls_to_execution_change_keystore_signature-*</code> JSON file.</p>
</li>
<li>
<p><strong><code>--devnet_chain_setting</code></strong>: The custom chain setting of a devnet or testnet. Note that it will override your <code>--chain</code> choice. This should be a JSON string containing an object with the following keys: network_name, genesis_fork_version, exit_fork_version and genesis_validator_root.</p>
</li>
</ul>
<h2 id="output-files-3"><a class="header" href="#output-files-3">Output files</a></h2>
<p>A successful call to this command will result in one <a href="bls_to_execution_change_keystore_file.html">BLS to Execution Change Keystore file</a> created.</p>
<h2 id="example-usage-3"><a class="header" href="#example-usage-3">Example Usage</a></h2>
<pre><code class="language-sh">./deposit generate-bls-to-execution-change-keystore
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="exit-transaction-keystore"><a class="header" href="#exit-transaction-keystore">exit-transaction-keystore</a></h1>
<div class="warning">
Including sensitive arguments when executing CLI commands poses a security risk, as these values can be accessible through disk and shell history. This exposure can allow other users, including admins and malicious actors, to gain access to sensitive information, putting your funds at risk.
</div>
<h2 id="description-4"><a class="header" href="#description-4">Description</a></h2>
<p>Creates an exit transaction using a keystore file.</p>
<h2 id="optional-arguments-4"><a class="header" href="#optional-arguments-4">Optional Arguments</a></h2>
<ul>
<li>
<p><strong><code>--chain</code></strong>: The chain to use for generating the deposit data. Options are: 'mainnet', 'holesky', etc.</p>
</li>
<li>
<p><strong><code>--keystore</code></strong>: The keystore file associating with the validator you wish to exit.</p>
</li>
<li>
<p><strong><code>--keystore_password</code></strong>: The password that is used to encrypt the provided keystore. Note: It's not your mnemonic password. <span class="warning"></span></p>
</li>
<li>
<p><strong><code>--validator_index</code></strong>: The validator index corresponding to the provided keystore.</p>
</li>
<li>
<p><strong><code>--epoch</code></strong>: The epoch of when the exit transaction will be valid. The transaction will always be valid by default.</p>
</li>
<li>
<p><strong><code>--output_folder</code></strong>: The folder path for the <code>signed_exit_transaction-*</code> JSON file.</p>
</li>
<li>
<p><strong><code>--devnet_chain_setting</code></strong>: The custom chain setting of a devnet or testnet. Note that it will override your <code>--chain</code> choice. This should be a JSON string containing an object with the following keys: network_name, genesis_fork_version, exit_fork_version and genesis_validator_root.</p>
</li>
</ul>
<h2 id="output-files-4"><a class="header" href="#output-files-4">Output files</a></h2>
<p>A successful call to this command will result in one <a href="signed_exit_transaction_file.html">Signed Exit Transaction file</a> created.</p>
<h2 id="example-usage-4"><a class="header" href="#example-usage-4">Example Usage</a></h2>
<pre><code class="language-sh">./deposit exit-transaction-keystore --keystore /path/to/keystore.json
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="exit-transaction-mnemonic"><a class="header" href="#exit-transaction-mnemonic">exit-transaction-mnemonic</a></h1>
<div class="warning">
Including sensitive arguments when executing CLI commands poses a security risk, as these values can be accessible through disk and shell history. This exposure can allow other users, including admins and malicious actors, to gain access to sensitive information, putting your funds at risk.
</div>
<h2 id="description-5"><a class="header" href="#description-5">Description</a></h2>
<p>Creates an exit transaction using a mnemonic phrase.</p>
<h2 id="optional-arguments-5"><a class="header" href="#optional-arguments-5">Optional Arguments</a></h2>
<ul>
<li>
<p><strong><code>--chain</code></strong>: The chain to use for generating the deposit data. Options are: 'mainnet', 'holesky', etc.</p>
</li>
<li>
<p><strong><code>--mnemonic</code></strong>: The mnemonic you used during key generation. <span class="warning"></span></p>
</li>
<li>
<p><strong><code>--mnemonic_language</code></strong>: The language of your mnemonic. If this is not provided we will attempt to determine it based on the mnemonic.</p>
</li>
<li>
<p><strong><code>--mnemonic_password</code></strong>: The mnemonic password you used in your key generation. Note: It's not the keystore password. <span class="warning"></span></p>
</li>
<li>
<p><strong><code>--validator_start_index</code></strong>: The index position for the keys to start generating keystores in <a href="https://eips.ethereum.org/EIPS/eip-2334#eth2-specific-parameters">ERC-2334 format</a> format.</p>
</li>
<li>
<p><strong><code>--validator_indices</code></strong>: A list of the chosen validator index number(s) as identified on the beacon chain. Split multiple items with whitespaces or commas.</p>
</li>
<li>
<p><strong><code>--epoch</code></strong>: The epoch of when the exit transaction will be valid. The transaction will always be valid by default.</p>
</li>
<li>
<p><strong><code>--output_folder</code></strong>: The folder path for the <code>signed_exit_transaction-*</code> JSON file.</p>
</li>
<li>
<p><strong><code>--devnet_chain_setting</code></strong>: The custom chain setting of a devnet or testnet. Note that it will override your <code>--chain</code> choice. This should be a JSON string containing an object with the following keys: network_name, genesis_fork_version, exit_fork_version and genesis_validator_root.</p>
</li>
</ul>
<h2 id="output-files-5"><a class="header" href="#output-files-5">Output files</a></h2>
<p>A successful call to this command will result in one or more <a href="signed_exit_transaction_file.html">Signed Exit Transaction files</a> created.</p>
<h2 id="example-usage-5"><a class="header" href="#example-usage-5">Example Usage</a></h2>
<pre><code class="language-sh">./deposit exit-transaction-mnemonic
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="partial-deposit"><a class="header" href="#partial-deposit">partial-deposit</a></h1>
<div class="warning">
Including sensitive arguments when executing CLI commands poses a security risk, as these values can be accessible through disk and shell history. This exposure can allow other users, including admins and malicious actors, to gain access to sensitive information, putting your funds at risk.
</div>
<h2 id="description-6"><a class="header" href="#description-6">Description</a></h2>
<p>Creates a deposit file with an existing validator key. Can be used to initiate a validator or deposit to an existing validator.
If you wish to create a validator with 0x00 credentials, you must use the <strong><a href="new_mnemonic.html">new-mnemonic</a></strong> or the <strong><a href="existing_mnemonic.html">existing-mnemonic</a></strong> command.</p>
<h2 id="optional-arguments-6"><a class="header" href="#optional-arguments-6">Optional Arguments</a></h2>
<ul>
<li>
<p><strong><code>--chain</code></strong>: The chain to use for generating the deposit data. Options are: 'mainnet', 'holesky', etc.</p>
</li>
<li>
<p><strong><code>--keystore</code></strong>: The keystore file associating with the validator you wish to deposit to.</p>
</li>
<li>
<p><strong><code>--keystore_password</code></strong>: The password that is used to encrypt the provided keystore. Note: It's not your mnemonic password. <span class="warning"></span></p>
</li>
<li>
<p><strong><code>--amount</code></strong>: The amount you wish to deposit in ether. Must be at least 1 and can not have precision beyond 1 gwei. Defaults to 32 ether.</p>
</li>
<li>
<p><strong><code>--withdrawal_address</code></strong>: The withdrawal address of the existing validator or the desired withdrawal address.</p>
</li>
<li>
<p><strong><code>--output_folder</code></strong>: The folder path for the <code>deposit-*</code> JSON file.</p>
</li>
<li>
<p><strong><code>--devnet_chain_setting</code></strong>: The custom chain setting of a devnet or testnet. Note that it will override your <code>--chain</code> choice. This should be a JSON string containing an object with the following keys: network_name, genesis_fork_version, exit_fork_version and genesis_validator_root.</p>
</li>
</ul>
<h2 id="output-file"><a class="header" href="#output-file">Output file</a></h2>
<p>A successful call to this command will result in one <a href="deposit_data_file.html">deposit data file</a> created.</p>
<h2 id="example-usage-6"><a class="header" href="#example-usage-6">Example Usage</a></h2>
<pre><code class="language-sh">./deposit partial-deposit --keystore /path/to/keystore.json
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="test-keystore"><a class="header" href="#test-keystore">test-keystore</a></h1>
<div class="warning">
Including sensitive arguments when executing CLI commands poses a security risk, as these values can be accessible through disk and shell history. This exposure can allow other users, including admins and malicious actors, to gain access to sensitive information, putting your funds at risk.
</div>
<h2 id="description-7"><a class="header" href="#description-7">Description</a></h2>
<p>Will verify access to the provided keystore file by attempting to decrypt it with the provided keystore password.</p>
<h2 id="optional-arguments-7"><a class="header" href="#optional-arguments-7">Optional Arguments</a></h2>
<ul>
<li>
<p><strong><code>--keystore</code></strong>: The keystore file you wish to verify.</p>
</li>
<li>
<p><strong><code>--keystore_password</code></strong>: The password used to attempt decryption of the provided keystore file. Note: It is not your mnemonic password. <span class="warning"></span></p>
</li>
</ul>
<h2 id="example-usage-7"><a class="header" href="#example-usage-7">Example Usage</a></h2>
<pre><code class="language-sh">./deposit test-keystore --keystore /path/to/keystore.json
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="keystore-file"><a class="header" href="#keystore-file">Keystore file</a></h1>
<p>A keystore file is created when calling the <strong><a href="new_mnemonic.html">new-mnemonic</a></strong> or the <strong><a href="existing_mnemonic.html">existing-mnemonic</a></strong> command.</p>
<p>The format of the keystore file is defined in the <a href="https://eips.ethereum.org/EIPS/eip-2335">ERC-2335: BLS12-381 Keystore</a> document.</p>
<p>In the context of staking on the Ethereum blockchain, the keystore file is used to store the validator signing key and transport it across devices while being protected with a password. Once created by a tool such as ethstaker-deposit-cli, it will generally be copied on a device running a validator client to be imported by that validator client with the associated password. Once the validator signing key is available to the validator client, it generally provides all the secrets needed to perform the associated validator's duties.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="deposit-data-file"><a class="header" href="#deposit-data-file">Deposit Data file</a></h1>
<p>A deposit data file is created when calling the <strong><a href="new_mnemonic.html">new-mnemonic</a></strong>, the <strong><a href="existing_mnemonic.html">existing-mnemonic</a></strong> or the <strong><a href="partial_deposit.html">partial-deposit</a></strong> command.</p>
<p>The deposit data file is a JSON file that contains a list of deposits that is mostly used for the <a href="https://github.com/ethereum/staking-launchpad">Ethereum Staking Launchpad</a>. It is loosly based on <a href="https://github.com/ethereum/consensus-specs/blob/dev/specs/phase0/beacon-chain.md#depositdata">the DepositData structure</a> and the <a href="https://github.com/ethereum/consensus-specs/blob/dev/specs/phase0/deposit-contract.md#deposit-function">deposit function</a> from the <a href="https://github.com/ethereum/consensus-specs/blob/dev/specs/phase0/deposit-contract.md">deposit smart contract</a>.</p>
<h2 id="format"><a class="header" href="#format">Format</a></h2>
<p>Each deposit from the list will contain this structure:</p>
<pre><code class="language-JSON">{
    "pubkey": "string",
    "withdrawal_credentials": "string",
    "amount": "number",
    "signature": "string",
    "deposit_message_root": "string",
    "deposit_data_root": "string",
    "fork_version": "string",
    "network_name": "string",
    "deposit_cli_version": "string"
}
</code></pre>
<ul>
<li><strong>pubkey</strong>: The validator public key value to be passed to the deposit function call.</li>
<li><strong>withdrawal_credentials</strong>: The withdrawal credentials value to be passed to the deposit function call.</li>
<li><strong>amount</strong>: The deposit amount to be sent with the call to the deposit function call. This should always be 32 Ethers (in GWEI, <code>32000000000</code>) when performing a deposit for a validator to be activated. The unit for this value is GWEI. For partial deposits, this value can be an integer value higher or equal than 1 and generally lower than or equal to 2048 in Ethers.</li>
<li><strong>signature</strong>: The signature value to be passed to the deposit function call.</li>
<li><strong>deposit_message_root</strong>: A deposit message root value used for validation by the Ethereum Staking Launchpad.</li>
<li><strong>deposit_data_root</strong>: The deposit data root value to be passed to the deposit function call.</li>
<li><strong>fork_version</strong>: The fork version of the network that this deposit file was created for.</li>
<li><strong>network_name</strong>: The network name of the network that this deposit file was created for.</li>
<li><strong>deposit_cli_version</strong>: The tool version used to create this file.</li>
</ul>
<h2 id="example"><a class="header" href="#example">Example</a></h2>
<pre><code class="language-JSON">[
  {
    "pubkey":"962195958e742b8dc5b2a25adede82fc5cd661827cb1e1237025e3d7847801aa5584d5bfdc6893413264cccfbff54128",
    "withdrawal_credentials":"0007a213a9a50ddf7e00e53267af1c131ed82fec947f1c9656b54f9a20f7a87f",
    "amount":32000000000,
    "signature":"a2d56afe4540d5b506aea614848a0838b66c8707a91aa73cdb0e7b59d819f16be64881b5b621184b1668f4f1d024094a1861c5af783ded675b5763047c069c5eb805649f7c04656c96b31b0bccc34ed93c8fcd8f2e4a9e5c03453f305089d765",
    "deposit_message_root":"f9bdb1e800b8f9f0db98c77271745e3c6140f18bf420543bda84fa92c393ddc7",
    "deposit_data_root":"7cda08cd57c303f8af720b10a0852408bc31e015cb552f0029fc1024b8a1d615",
    "fork_version":"01017000",
    "network_name":"holesky",
    "deposit_cli_version":"2.7.0"
  },
  {
    "pubkey":"86ee0b826d7d5262324ace2fba4ed5f09a1cbef80552e3d945279f19bc4118a98e9a93257eb4c7731ccc10c19835d24f",
    "withdrawal_credentials":"00daf39b8996943de9e93d417a6c5a4b958e4ae7a4d6e27f72aa08d41faa012f",
    "amount":32000000000,
    "signature":"83b227d72d9f1362d8676a61b91bb3882059e89c7d862d8030b1d37e890143869c105a78efce2a734f202da95076782219010e896ec9f8328a9e553134773626810d6c455bc1250a20e52a01684c051dd3e46151587267214cbb396673a13e89",
    "deposit_message_root":"99dbb2392fef277c15e710ca0ead058c024adce15f9e8f369bbaea939c0009ed",
    "deposit_data_root":"0fcb16fdb536b00a037a3ccde67187d21abfb726d677e40709ae6910d44377a5",
    "fork_version":"01017000",
    "network_name":"holesky",
    "deposit_cli_version":"2.7.0"
  }
]
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bls-to-execution-change-file"><a class="header" href="#bls-to-execution-change-file">BLS to Execution Change file</a></h1>
<p>A BLS to execution change file is created when calling the <strong><a href="generate_bls_to_execution_change.html">generate-bls-to-execution-change</a></strong> command.</p>
<p>The BLS to execution change file is a JSON file. It contains a list of messages to change the withdrawal credentials for one or many validators. The format of the BLS to execution change file is loosly based on the input for the POST <code>/eth/v1/beacon/pool/bls_to_execution_changes</code> <a href="https://ethereum.github.io/beacon-APIs/#/Beacon/submitPoolBLSToExecutionChange">API endpoint</a> as defined by <a href="https://github.com/ethereum/beacon-APIs">the Ethereum Beacon APIs</a>. Part of this content is based on the <a href="https://github.com/ethereum/consensus-specs/blob/dev/specs/capella/beacon-chain.md#signedblstoexecutionchange">SignedBLSToExecutionChange</a> container as defined in the <a href="https://github.com/ethereum/consensus-specs/">Ethereum Consensus Specifications</a>.</p>
<h2 id="broadcasting"><a class="header" href="#broadcasting">Broadcasting</a></h2>
<p>If you have access to a beacon node client running on your target network, you can publish these messages simply by calling the POST <code>/eth/v1/beacon/pool/bls_to_execution_changes</code> <a href="https://ethereum.github.io/beacon-APIs/#/Beacon/submitPoolBLSToExecutionChange">API endpoint</a> and passing the content of the BLS to execution change file as the payload. You can also use <a href="https://beaconcha.in/tools/broadcast">the Beaconcha.in Broadcast Signed Messages tool</a> which might be easier for most users.</p>
<h2 id="example-1"><a class="header" href="#example-1">Example</a></h2>
<pre><code class="language-JSON">[
  {
    "message":{
      "validator_index":"1804776",
      "from_bls_pubkey":"0x970245df5f9cf7a082db195136a3066412b62e8bf04e21d7c3408d7fb36f34f20c4cb0883e798b82523b466f7a61c838",
      "to_execution_address":"0x4d496ccc28058b1d74b7a19541663e21154f9c84"
    },
    "signature":"0xa1e47e6b1fdf4dd5f1dd3ddb3d47d2dcf446d096d49d90afef06a38dc02fba6b4d16d1dc1184c791e54666dabb8bdedd0660bc9bb3bc5d0e592eaf5f0c978cca4fcafe4037672940d6f1a44d2a33503c30cb98ca695979b1de9e321a8a694bc2",
    "metadata":{
      "network_name":"holesky",
      "genesis_validators_root":"0x9143aa7c615a7f7115e2b6aac319c03529df8242ae705fba9df39b79c59fa8b1",
      "deposit_cli_version":"0.1.4-dev"
    }
  }
]
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bls-to-execution-change-keystore-file"><a class="header" href="#bls-to-execution-change-keystore-file">BLS to Execution Change Keystore file</a></h1>
<p>A BLS to execution change keystore file is created when calling the <strong><a href="generate_bls_to_execution_change_keystore.html">generate-bls-to-execution-change-keystore</a></strong> command.</p>
<p>The BLS to execution change keystore file is a JSON file. The format is very similar to the <a href="bls_to_execution_change_file.html">BLS to execution change file</a> but with the <code>from_bls_pubkey</code> and <code>metadata</code> attributes removed.</p>
<h2 id="utilizing"><a class="header" href="#utilizing">Utilizing</a></h2>
<p>There is currently no integration with this file format with either the execution layer or beacon chain. The <code>signature</code> value must be provided as the <code>keystore_signature</code> for the <a href="https://github.com/eth-educators/update-credentials-without-mnemonic#signature-file-format">Signature file</a>.</p>
<h2 id="example-2"><a class="header" href="#example-2">Example</a></h2>
<pre><code class="language-JSON">{
  "message":{
    "validator_index":"1804776",
    "to_execution_address":"0x4d496ccc28058b1d74b7a19541663e21154f9c84"
  },
  "signature":"0xa1e47e6b1fdf4dd5f1dd3ddb3d47d2dcf446d096d49d90afef06a38dc02fba6b4d16d1dc1184c791e54666dabb8bdedd0660bc9bb3bc5d0e592eaf5f0c978cca4fcafe4037672940d6f1a44d2a33503c30cb98ca695979b1de9e321a8a694bc2",
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="signed-exit-transaction-file"><a class="header" href="#signed-exit-transaction-file">Signed Exit Transaction file</a></h1>
<p>A signed exit transaction file is created when calling the <strong><a href="exit_transaction_keystore.html">exit-transaction-keystore</a></strong> or the <strong><a href="exit_transaction_mnemonic.html">exit-transaction-mnemonic</a></strong> command.</p>
<p>The signed exit transaction file is a JSON file. It contains a single message to exit a validator. The format of the signed exit transaction file is loosly based on the input for the POST <code>/eth/v1/beacon/pool/voluntary_exits</code> <a href="https://ethereum.github.io/beacon-APIs/#/Beacon/submitPoolVoluntaryExit">API endpoint</a> as defined by <a href="https://github.com/ethereum/beacon-APIs">the Ethereum Beacon APIs</a>. Part of this content is based on the <a href="https://github.com/ethereum/consensus-specs/blob/dev/specs/phase0/beacon-chain.md#signedvoluntaryexit">SignedVoluntaryExit</a> signed envelope as defined in the <a href="https://github.com/ethereum/consensus-specs/">Ethereum Consensus Specifications</a>.</p>
<h2 id="broadcasting-1"><a class="header" href="#broadcasting-1">Broadcasting</a></h2>
<p>If you have access to a beacon node client running on your target network, you can publish this message simply by calling the POST <code>/eth/v1/beacon/pool/voluntary_exits</code> <a href="https://ethereum.github.io/beacon-APIs/#/Beacon/submitPoolVoluntaryExit">API endpoint</a> and passing the content of the signed exit transaction file as the payload. You can also use <a href="https://beaconcha.in/tools/broadcast">the Beaconcha.in Broadcast Signed Messages tool</a> which might be easier for most users.</p>
<h2 id="example-3"><a class="header" href="#example-3">Example</a></h2>
<pre><code class="language-JSON">{
  "message":{
    "epoch":"0",
    "validator_index":"1804776"
  },
  "signature":"0x97fa465cf1081755002e35fab245bd2872381b07cbfa4df245a13e3834aba83a347f5c2a36a34760e9fcc754dd862de700d103b1cb0d5d9ce293242ebf9ad44a6073e5c4794424428a8f983513d88e6ff6ddccbde7b3e0ea43554a0b856f3199"
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="local-development-instructions"><a class="header" href="#local-development-instructions">Local Development Instructions</a></h1>
<p>To install the <code>ethstaker-deposit-cli</code>, follow these steps:</p>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>Ensure you have the following software installed on your system:</p>
<ul>
<li><strong>Git</strong>: Version control system to clone the repository. <a href="https://git-scm.com/downloads">Download Git</a></li>
<li><strong>Python 3.9+</strong>: The programming language required to run the tool. <a href="https://www.python.org/downloads/">Download Python</a></li>
<li><strong>pip</strong>: Package installer for Python, which is included with Python 3.9+.</li>
</ul>
<p>On Windows, you'll need:</p>
<ul>
<li><strong>Git for Windows</strong>: Version control system to clone the repository. Configure it to associate <code>.sh</code> files with <code>bash</code>. <a href="https://git-scm.com/download/win">Download GfW</a></li>
<li><strong>Windows Terminal</strong>: Optional but recommended command line console. Configure GfW to install a Git Bash profile. <a href="https://apps.microsoft.com/detail/9n0dx20hk701">Download Windows Terminal</a></li>
<li><strong>Python 3.9+</strong>: The programming language required to run the tool. <a href="https://apps.microsoft.com/detail/9ncvdn91xzqp">Download Python</a></li>
<li><strong>Visual Studio C++</strong>: The compiler required to build some of the dependencies of the tool. <a href="https://visualstudio.microsoft.com/vs/features/cplusplus/">Download VS C++</a></li>
</ul>
<h2 id="local-development-steps"><a class="header" href="#local-development-steps">Local Development Steps</a></h2>
<ol>
<li>
<p><strong>Clone the Repository</strong></p>
<pre><code class="language-sh">git clone https://github.com/eth-educators/ethstaker-deposit-cli.git
</code></pre>
</li>
<li>
<p><strong>Navigate to the Project Directory</strong></p>
<pre><code class="language-sh">cd ethstaker-deposit-cli
</code></pre>
</li>
<li>
<p><strong>Setup virtualenv (optional)</strong></p>
<p>Install <code>venv</code> if not already installed, e.g. for Debian/Ubuntu:</p>
<pre><code class="language-sh">sudo apt update &amp;&amp; sudo apt install python3-venv
</code></pre>
<p>Create a new <a href="https://docs.python.org/3/library/venv.html">virtual environment</a>:</p>
<pre><code class="language-sh">python3 -m venv .venv
source .venv/bin/activate
</code></pre>
</li>
<li>
<p><strong>Install Dependencies</strong></p>
<pre><code class="language-sh">pip3 install -r requirements.txt
</code></pre>
</li>
<li>
<p><strong>Run the CLI</strong></p>
<p>You can now run the CLI tool using the following command:</p>
<pre><code class="language-sh">python3 -m ethstaker_deposit [OPTIONS] COMMAND [ARGS]
</code></pre>
</li>
<li>
<p><strong>Use pre-commit for PRs</strong></p>
<p>Install <code>pre-commit</code> if not already installed, e.g. for Debian/Ubuntu:</p>
<pre><code class="language-sh">sudo apt update &amp;&amp; sudo apt install pre-commit
</code></pre>
<p>Enable it for your <code>git commit</code> workflow:</p>
<pre><code class="language-sh">pre-commit install
</code></pre>
</li>
</ol>
<p><strong>To execute tests, you will need to install the test dependencies</strong>:</p>
<pre><code class="language-sh">python3 -m pip install -r requirements_test.txt
python3 -m pytest tests
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-process-instructions"><a class="header" href="#release-process-instructions">Release Process Instructions</a></h1>
<p>This document is meant as a guide on how to perform and publish a new release version of <a href="https://github.com/eth-educators/ethstaker-deposit-cli">ethstaker-deposit-cli</a>. It includes step by step instructions to complete the release process.</p>
<ol>
<li>Make sure all the tests from the latest <a href="https://github.com/eth-educators/ethstaker-deposit-cli/actions/workflows/runner.yml">ci-runner workflow</a> on the latest commit of the main branch are completed. Make sure all tests are passing on all the supported platforms.</li>
<li>Determine a new version number. Version numbers should adhere to <a href="https://semver.org/">Semantic Versioning</a>. For any official release, it should include a major, a minor and a patch identifier like <code>1.0.0</code>.</li>
<li>Update <code>ethstaker_deposit/__init__.py</code>'s <code>__version__</code> variable with the new version number. Commit this change to the main branch of the main repository.</li>
<li>Add a tag to the main repository for this changed version commit above. The name of this tag should be a string starting with <code>v</code> concatenated with the version number. With git, the main repository cloned and the commit above being the head, it can look like this:</li>
</ol>
<pre><code class="language-console">git tag -a -m 'Version 1.0.0' v1.0.0
git push origin v1.0.0
</code></pre>
<ol start="5">
<li>Wait for all the build assets and the draft release to be created by <a href="https://github.com/eth-educators/ethstaker-deposit-cli/actions/workflows/build.yml">the ci-build workflow</a>.</li>
<li>Open the draft release and fill in the different sections correctly.</li>
<li>If this is not a production release, check the <em>Set as a pre-release</em> checkbox.</li>
<li>Click the <em>Publish release</em> button.</li>
<li>Determine a new dev version number. You can try to guess the next version number to the best of your ability. This will always be subject to change. Add a <code>dev</code> identifier to the version number to clearly indicate this is a dev version number.</li>
<li>Update <code>ethstaker_deposit/__init__.py</code>'s <code>__version__</code> variable with a new dev version number. Commit this change to the main branch.</li>
</ol>
<h2 id="release-notes-template"><a class="header" href="#release-notes-template">Release Notes Template</a></h2>
<p>You can find the latest release notes template on https://github.com/eth-educators/ethstaker-deposit-cli/blob/main/.github/release_template.md .</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="reporting-a-vulnerability"><a class="header" href="#reporting-a-vulnerability">Reporting a Vulnerability</a></h1>
<p>Private vulnerability reporting is enabled on <a href="https://github.com/eth-educators/ethstaker-deposit-cli">the ethstaker-deposit-cli repository</a>. Feel free to report any security vulnerability through <a href="https://docs.github.com/en/code-security/security-advisories/guidance-on-reporting-and-writing-information-about-vulnerabilities/privately-reporting-a-security-vulnerability#privately-reporting-a-security-vulnerability">the GitHub <em>Report a vulnerability</em> feature</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
